@var content={
    <div class="tip"/>
    <form method="post" add-action="/system/users/add" update-action="/system/users/update" id="${formId}" class="ajaxForm">
        <input type="hidden" name="user.USER_ID"/>
        <tp:field id="userloginName" label="登录名" name="user.LOGIN_NAME" desc="请输入字母或者数字组合" required="true"/>
        <tp:field id="userEmail" label="用户邮箱" name="user.EMAIL" required="true" valid="email=true"/>
        <div class="form-group">
            <label for="remark">备注</label>
            <textarea class="form-control" rows="3" name="user.REMARK" placeholder=""></textarea>
        </div>
    </form>
@};

<tp:modalValidate id="${dialogId}" btn="添加用户" title="编辑用户" content="${content}" form="${formId}"/>

<script>
function initControls(){
	$("#user_role_id").empty();
	$("#user_company_id").empty();
	loadRoles("#user_role_id");
	loadCompanies("#user_company_id");
	$("input[name='user.login_name']").attr("disabled",false);
}
function loadItem(id){
    $.getJSON("/system/users/get/" + id, function(json){
    	if(json.error != 0){
    		alert('获取数据失败:' + json.data);
    	}
    	var item = json.data;
    	$("input[name='user.USER_ID']").val(item.USER_ID);
    	$("input[name='user.LOGIN_NAME']").val(item.LOGIN_NAME);
    	$("input[name='user.EMAIL']").val(item.EMAIL);
    	$("textarea[name='user.REMARK']").val(item.REMARK);
    });   
}
</script>