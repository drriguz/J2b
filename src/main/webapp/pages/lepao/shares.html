@var js={
<script src="${CONTEXT_PATH}/static/js/modalEvents.js"></script>
<script src="${CONTEXT_PATH}/static/js/listEvents.js"></script>
<script src="${CONTEXT_PATH}/static/js/formatter.js"></script>
<script src="${CONTEXT_PATH}/static/ace/js/jquery.colorbox.min.js"></script>
<script>
	function handleSelections(action){
		var selections = $('.dataTable').bootstrapTable('getSelections');
		var confirm = $.scojs_confirm({
			content: "是否确认要操作" + selections.length + '个项目？',
			action: function() {
				var url = action;
				var success = 0;
				$.ajaxSettings.async = false; 
				$.each(selections, function(){					
					$.getJSON(url + "/" + this.IMG_ID, function(json){
						if(json.error != 0){
							console.log('操作失败'+$.scojs_message.TYPE_ERROR);
							$.scojs_message('操作失败！', $.scojs_message.TYPE_ERROR);							
							return;
						}else{
							success += 1;
						}
					});
				});
				$.scojs_message('操作完成，共处理了' + success + '个项目', $.scojs_message.TYPE_OK);
				$('.dataTable').bootstrapTable('refresh');
			}
		});
		confirm.show();
	}
	$(function(){
		$('#passBtn').click(function(){
			handleSelections("/share/pass");	
		});
		$('#rejectBtn').click(function(){
			handleSelections("/share/reject");	
		});
		$('#deleteBtn').click(function(){
			handleSelections("/share/delete");	
		});
		$.fn.colorbox.settings.transition = "fade";
		$.fn.colorbox.settings.bgOpacity = "0.9";
		$.fn.colorbox.settings.contentCurrent = "image {current} of {total}";
		$(".colorbox").colorbox({rel:'group1'});
		
	});
	
</script>
@};

@layout("../../layout/_aceLayout.html", {extJs:js, pageUrl:"/share", title:"图片审核"}){
<div id="toolbar">
	<div class="">
	    <div class="form-inline" role="form">
	        <div class="form-group">
    		<input name="search" class="form-control" type="text" placeholder="Search">
		</div>
	        <button type="submit" class="btn btn-bold btn-primary searchButton">
	        	<span class="ace-icon glyphicon glyphicon-search bigger-110 icon-only">查找</span>
	        </button>
	    </div>
	</div>
	<div class="">
	    <div class="btn-group"  role="group">
	    	<button id="passBtn" type="button" class="btn btn-success btn-bold multSelect" disabled>
	            <span class="ace-icon fa fa-eye bigger-110 icon-only"></span>
	        </button>
	    	<button id="rejectBtn" type="button" class="btn btn-warn btn-bold multSelect" disabled>
	            <span class="ace-icon fa fa-ban bigger-110 icon-only"></span>
	        </button>
	        <button id="deleteBtn" type="button" class="btn btn-danger btn-bold multSelect" disabled>
	            <span class="ace-icon fa fa-trash-o bigger-110 icon-only"></span>
	        </button>
	        ${toolButtons!}
	    </div>
	</div>
</div>

<table id="imgssList" class="dataTable"
    data-toggle="table"
    data-toolbar="#toolbar"
    data-height="600"
    data-url="/share/list"
    data-query-params="queryParams"
    data-show-columns="false"
    data-side-pagination="server"
    data-pagination="true"
    data-page-list="[5, 10, 20, 50, 100, 200]"
    data-search="false"
    data-click-to-select="true"
    data-id-field="id">
    <thead>
    <tr>
        <th data-field="check" data-checkbox="true"></th>
        <th data-field="IMG_ID" data-visible="false">ID</th>
        <th data-field="THUMB_PATH" data-formatter="thumbFormatter">缩略图</th>
        <th data-field="UPLOAD_USER_NAME">上传用户</th>
        <th data-field="UPLOAD_TIME">上传时间</th>
        <th data-field="DESCRIBLE">描述</th>
        <th data-field="SHARE_STATUS">审核状态</th>
    </tr>
    </thead>
</table>
@};

